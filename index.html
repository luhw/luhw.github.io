<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
  <title>luhw's page</title>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/fingerprintjs2/2.1.0/fingerprint2.js"></script>
</head>
<body>
  <div id="created">hello world fingerprintsss</div>
  <div id="com"></div>
  <script type="text/javascript">
    if (window.requestIdleCallback) {
        requestIdleCallback(function () {
            Fingerprint2.get({
              excludes: {
                userAgent: true,
                webdriver: true,
                deviceMemory: true,
                hardwareConcurrency: true,
                availableScreenResolution: true,
                plugins: true,
                canvas: true,
                webgl: true,
                audio: true,
                enumerateDevices: true,
                openDatabase: true,
                doNotTrack: true
              }
            }, function (components) {
              console.log(components) // an array of components: {key: ..., value: ...}
              var values = components.map(function (component) { return component.value })
              var murmur = Fingerprint2.x64hash128(values.join(''), 31)
              document.getElementById('created').innerHTML = murmur
              document.getElementById('com').innerHTML = JSON.stringify(components)
            })
            return
            Fingerprint2.getV18({
              deviceMemory: true,
              excludes: {
                // userAgent: true, 
                // sessionStorage: true,
                // localStorage: true,
                // indexedDb: true,
                // addBehavior: true,
                // openDatabase: true,
                // doNotTrack: true,
                // plugins: true,
                // canvas: true,
                // webgl: true,
                // adBlock: true,
                fonts: true,
                // audio: true
              }
            }, function (result, components) {
              // result is murmur hash fingerprint
              // components is array of {key: 'foo', value: 'component value'}
              document.getElementById('created').innerHTML = result
            })
            return
            Fingerprint2.get(function (components) {
              console.log(components) // an array of components: {key: ..., value: ...}
              var values = components.map(function (component) { return component.value })
              var murmur = Fingerprint2.x64hash128(values.join(''), 31)
              document.getElementById('created').innerHTML = murmur
            })
        })
    } else {
        setTimeout(function () {
          Fingerprint2.get({
              excludes: {
                userAgent: true,
                webdriver: true,
                deviceMemory: true,
                hardwareConcurrency: true,
                availableScreenResolution: true,
                plugins: true,
                canvas: true,
                webgl: true,
                audio: true,
                enumerateDevices: true,
                openDatabase: true,
                doNotTrack: true
              }
            }, function (components) {
            console.log(components) // an array of components: {key: ..., value: ...}
            var values = components.map(function (component) { return component.value })
            var murmur = Fingerprint2.x64hash128(values.join(''), 31)
            document.getElementById('created').innerHTML = murmur
            document.getElementById('com').innerHTML = JSON.stringify(components)
          })
          return
          Fingerprint2.getV18({
              deviceMemory: true,
              excludes: {
                userAgent: true, 
                sessionStorage: true,
                localStorage: true,
                indexedDb: true,
                addBehavior: true,
                openDatabase: true,
                doNotTrack: true,
                plugins: true,
                canvas: true,
                webgl: true,
                adBlock: true,
                fonts: true,
                audio: true
              }
            }, function (result, components) {
              // result is murmur hash fingerprint
              // components is array of {key: 'foo', value: 'component value'}
              document.getElementById('created').innerHTML = result
            })
            return
            Fingerprint2.get(function (components) {
              console.log(components) // an array of components: {key: ..., value: ...}
              var values = components.map(function (component) { return component.value })
              var murmur = Fingerprint2.x64hash128(values.join(''), 31)
              document.getElementById('created').innerHTML = murmur
            })  
        }, 500)
    }
    
  </script>
</body>
</html>
